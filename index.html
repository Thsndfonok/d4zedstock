<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>d4zedstore</title>
  <meta name="description" content="d4zedstore – modern, elegáns, animált egyoldalas webáruház sablon. Feltöltöd és működik." />
  <meta name="theme-color" content="#0b0b12" />
  <style>
    :root{
      --bg:#0b0b12; --card:rgba(255,255,255,.06); --card-2:rgba(255,255,255,.08);
      --glass:rgba(255,255,255,.08); --text:#f4f4f7; --muted:rgba(255,255,255,.7);
      --line:rgba(255,255,255,.12); --brand1:#b252ff; --brand2:#6ea8ff; --accent:#63f5d5;
      --ok:#6ee7b7; --warn:#f59e0b; --err:#ef4444; --radius:18px; --shadow:0 10px 40px -10px rgba(0,0,0,.5);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,"Helvetica Neue",Arial,"Apple Color Emoji","Segoe UI Emoji";background:var(--bg);color:var(--text);line-height:1.6;overflow-x:hidden}
    img{max-width:100%;display:block}
    a{color:inherit;text-decoration:none}
    button{cursor:pointer;font:inherit;color:inherit}
    .hide-sm{display:none}@media(min-width:600px){.hide-sm{display:inline}}

    /* NAV */
    .nav{position:fixed;inset:0 0 auto 0;height:64px;display:flex;align-items:center;justify-content:center;backdrop-filter:blur(10px);z-index:1000;transition:background .3s,border-color .3s;border-bottom:1px solid transparent}
    .nav.scrolled{background:rgba(3,3,8,.55);border-color:var(--line)}
    .nav-inner{width:min(1200px,92vw);display:flex;align-items:center;justify-content:space-between;gap:16px}
    .brand{display:inline-flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.5px}
    .brand-badge{width:28px;height:28px;border-radius:10px;background:conic-gradient(from 0deg,var(--brand1),var(--brand2),var(--brand1));filter:saturate(1.2) contrast(1.1);box-shadow:0 8px 30px -10px rgba(178,82,255,.7);animation:spin 12s linear infinite}
    @keyframes spin{to{transform:rotate(1turn)}}
    .nav-links{display:none;gap:22px}
    .nav-links a{position:relative;font-size:14px;opacity:.85}
    .nav-links a::after{content:"";position:absolute;left:0;bottom:-6px;width:0;height:2px;background:linear-gradient(90deg,var(--brand1),var(--brand2));transition:width .25s;border-radius:2px}
    .nav-links a:hover::after{width:100%}
    .btn{padding:10px 16px;border-radius:999px;border:1px solid var(--line);background:rgba(255,255,255,.06);box-shadow:var(--shadow);display:inline-flex;align-items:center;gap:8px}
    .btn-prim{background:linear-gradient(90deg,var(--brand1),var(--brand2));border-color:transparent;font-weight:700}
    @media(min-width:800px){.nav-links{display:flex}}

    /* HERO */
    .hero{position:relative;padding:120px 0 70px;isolation:isolate}
    .max{width:min(1200px,92vw);margin-inline:auto}
    .h1{font-size:clamp(34px,5vw,64px);font-weight:900;letter-spacing:-.02em;line-height:1.1;background:linear-gradient(90deg,#ffd6ff,#e4e7ff,#d1fff3);-webkit-background-clip:text;background-clip:text;color:transparent}
    .lead{color:var(--muted);max-width:700px;font-size:clamp(16px,2.3vw,19px)}
    .cta{display:flex;gap:12px;flex-wrap:wrap;margin-top:22px}
    .hero-badges{display:flex;gap:22px;margin-top:24px;color:rgba(255,255,255,.8);flex-wrap:wrap}
    .blob{position:absolute;border-radius:50%;filter:blur(50px);opacity:.3;mix-blend:screen}
    .blob.b1{width:360px;height:360px;background:radial-gradient(circle at 30% 30%,#8a2be2,transparent 60%);top:-60px;left:-60px;animation:float1 12s ease-in-out infinite}
    .blob.b2{width:420px;height:420px;background:radial-gradient(circle at 60% 60%,#00e5ff,transparent 60%);right:-80px;top:0;animation:float2 13s ease-in-out infinite}
    .blob.b3{width:300px;height:300px;background:radial-gradient(circle at 50% 50%,#00ffa8,transparent 60%);left:20%;bottom:-80px;animation:float3 15s ease-in-out infinite}
    @keyframes float1{0%,100%{transform:translateY(0)}50%{transform:translateY(18px)}}
    @keyframes float2{0%,100%{transform:translate(0,0)}50%{transform:translateY(-16px) translateX(-8px)}}
    @keyframes float3{0%,100%{transform:translate(0,0)}50%{transform:translate(-10px,10px)}}
    .bg-animated{position:absolute;inset:0;z-index:-1;background:radial-gradient(1200px 800px at 20% -20%,rgba(255,255,255,.06),transparent 60%),radial-gradient(1000px 600px at 120% 20%,rgba(255,255,255,.06),transparent 60%),linear-gradient(120deg,#0a0a12,#0a0a12 60%,#0c0f1a);background-size:200% 200%;animation:gradientMove 16s linear infinite}
    @keyframes gradientMove{0%{background-position:0% 0%}50%{background-position:100% 100%}100%{background-position:0% 0%}}

    /* FILTERS */
    .filters{margin-top:-46px;position:relative;z-index:2}
    .card{background:var(--card);border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow)}
    .filters-inner{display:flex;align-items:center;justify-content:space-between;gap:14px;padding:14px;flex-wrap:wrap}
    .chips{display:flex;gap:8px;flex-wrap:wrap}
    .chip{padding:8px 14px;border-radius:999px;border:1px solid var(--line);background:rgba(255,255,255,.05);font-size:14px}
    .chip.active{background:linear-gradient(90deg,var(--brand1),var(--brand2));border-color:transparent;font-weight:700}
    .search{position:relative}
    .search input{width:260px;padding:10px 34px;border-radius:999px;background:rgba(255,255,255,.05);border:1px solid var(--line);color:var(--text);outline:none}
    .search svg{position:absolute;left:10px;top:50%;transform:translateY(-50%);opacity:.6}

    /* GRID */
    .section{padding:60px 0}
    .grid{display:grid;gap:18px;grid-template-columns:repeat(1,minmax(0,1fr))}
    @media(min-width:600px){.grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
    @media(min-width:950px){.grid{grid-template-columns:repeat(3,minmax(0,1fr))}}
    .p-card{overflow:hidden;display:flex;flex-direction:column}
    .thumb{aspect-ratio:4/3;border-radius:14px;position:relative;overflow:hidden}
    .thumb::after{content:"";position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,.45),transparent 50%)}
    .thumb > .art{position:absolute;inset:0}
    .thumb .badge{position:absolute;left:12px;top:12px;background:rgba(255,255,255,.11);border:1px solid var(--line);padding:6px 10px;border-radius:999px;font-size:12px;font-weight:700}
    .p-body{padding:16px;display:flex;flex-direction:column;gap:10px}
    .p-top{display:flex;align-items:flex-start;justify-content:space-between;gap:12px}
    .price{font-weight:900;font-size:18px;opacity:.95}
    .rating{display:flex;align-items:center;gap:6px;font-size:12px;opacity:.8}
    .actions{margin-top:auto;display:flex;align-items:center;justify-content:space-between;gap:8px}
    .btn-like{border:1px solid var(--line);background:rgba(255,255,255,.06);padding:8px 12px;border-radius:999px}
    .p-card:hover .thumb .art{transform:scale(1.04)}
    .thumb .art{transition:transform .4s ease}

    /* KÉPEK */
    .thumb img, #pdArt img, #qvArt img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;display:block}

    /* CART */
    .drawer-back{position:fixed;inset:0;background:rgba(0,0,0,.6);opacity:0;pointer-events:none;transition:opacity .25s}
    .drawer{position:fixed;top:0;right:-420px;width:min(420px,92vw);height:100dvh;background:rgba(10,12,20,.92);border-left:1px solid var(--line);box-shadow:-20px 0 60px -20px rgba(0,0,0,.6);transition:right .35s;display:flex;flex-direction:column}
    .drawer.open{right:0}.drawer-back.open{opacity:1;pointer-events:auto}
    .drawer-header{padding:16px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--line)}
    .cart-items{padding:10px 12px;overflow:auto;display:flex;flex-direction:column;gap:10px}
    .cart-row{display:grid;grid-template-columns:64px 1fr auto;gap:10px;align-items:center;background:rgba(255,255,255,.04);border:1px solid var(--line);border-radius:12px;padding:10px}
    .qty{display:inline-flex;align-items:center;gap:8px}
    .qty button{width:28px;height:28px;border-radius:999px;border:1px solid var(--line);background:rgba(255,255,255,.06)}
    .cart-footer{margin-top:auto;padding:14px;border-top:1px solid var(--line);display:grid;gap:10px}
    .summary{display:flex;align-items:center;justify-content:space-between}

    /* DEALS */
    .deals{overflow:hidden;position:relative}
    .marquee{display:flex;gap:18px;white-space:nowrap;animation:slide 30s linear infinite}
    @keyframes slide{to{transform:translateX(-50%)}}
    .deal{display:inline-flex;align-items:center;gap:10px;padding:10px 16px;border:1px dashed var(--line);background:rgba(255,255,255,.04);border-radius:999px}

    /* REVEAL */
    .reveal{opacity:0;transform:translateY(18px);transition:opacity .6s,transform .6s}
    .reveal.in{opacity:1;transform:translateY(0)}

    footer{padding:60px 0;color:var(--muted)}
    .footer-inner{display:grid;gap:18px;grid-template-columns:1fr}
    @media(min-width:800px){.footer-inner{grid-template-columns:1.3fr 1fr 1fr}}

    .shine{position:relative;overflow:hidden}
    .shine::before{content:"";position:absolute;inset:-1px;border-radius:inherit;padding:1px;background:linear-gradient(120deg,rgba(255,255,255,.12),rgba(255,255,255,0) 20%,rgba(255,255,255,.12) 40%,rgba(255,255,255,0) 60%,rgba(255,255,255,.12) 80%);-webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);-webkit-mask-composite:xor;mask-composite:exclude;animation:borderShift 6s linear infinite;pointer-events:none}
    @keyframes borderShift{0%{background-position:0% 50%}100%{background-position:200% 50%}}
    .tilt{perspective:800px}.tilt>*{transform:rotateX(var(--rx,0)) rotateY(var(--ry,0));transition:transform .2s}
  </style>

  <!-- SELL.APP EMBED (Stripe-os checkout a saját oldalon, modálban) -->
  <link rel="stylesheet" href="https://cdn.sell.app/embed/style.css" />

  <!-- Stripe JS (meghagyjuk más funkciókra, de a checkoutot most a Sell.app intézi) -->
  <script src="https://js.stripe.com/v3/"></script>

  <!-- PayPal JS SDK (állítsd be a saját Client ID-t és devizát) -->
  <script>
    const PAYPAL_CLIENT_ID = "ARwugVxXwGXQGdUOSLoAyBdlDFFxaTRXR1qyvtEeczRHVJnivWPZKGSAvRjx6ZZfXZeoOB5W6Vdvs3BE";  // <-- CSERÉLD SAJÁTRA
    const PAYPAL_CURRENCY = "HUF";
    (function loadPayPal(){
      const s = document.createElement('script');
      s.src = `https://www.paypal.com/sdk/js?client-id=${encodeURIComponent(PAYPAL_CLIENT_ID)}&currency=${encodeURIComponent(PAYPAL_CURRENCY)}&intent=capture`;
      s.defer = true;
      document.head.appendChild(s);
    })();
  </script>
</head>
<body>
  <!-- ===== Navigáció ===== -->
  <nav class="nav" id="nav">
    <div class="nav-inner max">
      <a class="brand" href="#top" aria-label="d4zedstore kezdőlap">
        <span class="brand-badge" aria-hidden="true"></span>
        <span>d4zedstore</span>
      </a>
      <div class="nav-links">
        <a href="#products">Termékek</a>
        <a href="#deals">Információk</a>
        <a href="#contact">Kapcsolat</a>
      </div>
      <div style="display:flex;gap:10px;align-items:center;">
        <button class="btn" id="openCartBtn" aria-haspopup="dialog" aria-controls="cartDrawer">🛍️ <span class="hide-sm">Kosár</span></button>
      </div>
    </div>
  </nav>

  <!-- ===== Hero ===== -->
  <header class="hero" id="top">
    <div class="bg-animated"></div>
    <div class="blob b1"></div>
    <div class="blob b2"></div>
    <div class="blob b3"></div>

    <div class="max">
      <div class="tilt shine card" style="padding:28px;border-radius:var(--radius);background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.04));border:1px solid var(--line);">
        <div>
          <h1 class="h1"><span style="white-space:nowrap">d4zedstore</span></h1>
          <p class="lead" style="margin-top:10px;"> Nézz körül a <strong>Weboldalunkon,</strong> Prémium minőségű termékekkel dolgozunk és próbáljuk hozni a legbarátiasabb árat.</p>
          <div class="cta">
            <a href="#products" class="btn btn-prim">Vásárlás most →</a>
            <a href="#deals" class="btn">Információk</a>
          </div>
          <div class="hero-badges">
            <span>⚡ Prémium Termékek</span>
            <span>💳 Biztonságos fizetés</span>
            <span>⭐ 4.8+ értékelés</span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- ===== Szűrők / Kereső ===== -->
  <section class="filters max">
    <div class="card filters-inner shine">
      <div class="chips" id="chips"></div>
      <div class="search">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 21l-4.35-4.35M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        <input id="search" aria-label="Keresés" placeholder="Keresés..." />
      </div>
    </div>
  </section>

  <!-- ===== Termékek ===== -->
  <main class="section" id="products">
    <div class="max">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:14px;">
        <h2 class="reveal" style="font-size:26px;font-weight:800;">Kiemelt termékek</h2>
        <div id="activeLabel" class="reveal" style="opacity:.8;font-size:14px;">Összes</div>
      </div>
      <div class="grid" id="grid"></div>
    </div>
  </main>

  <!-- ===== Termék részletek ===== -->
  <section class="section" id="productDetail" style="display:none;position:relative;z-index:2;">
    <div class="max">
      <div class="card shine" style="padding:0;overflow:hidden;">
        <div style="display:grid;grid-template-columns:1.2fr 1fr;gap:0;">
          <div id="pdArt" style="min-height:320px;position:relative;"></div>
          <div style="padding:18px;display:grid;gap:12px;">
            <button class="btn" id="pdBack" type="button">← Vissza</button>
            <h3 id="pdName" style="font-size:24px;font-weight:900;"></h3>
            <div class="rating" id="pdRating"></div>
            <div id="pdPrice" class="price"></div>
            <p id="pdDesc" style="color:var(--muted);"></p>
            <ul id="pdFeat" style="list-style:'✔ ';padding-left:18px;display:grid;gap:4px;color:var(--muted);"></ul>
            <div style="display:flex;gap:10px;margin-top:6px;">
              <button class="btn btn-prim" id="pdAdd" type="button">Kosárba</button>
              <button class="btn" id="pdBuy" type="button">Vétel most</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== Akciók ===== -->
  <section class="section deals" id="deals">
    <div class="max">
      <h2 class="reveal" style="font-size:26px;font-weight:800;margin-bottom:14px;">Információk</h2>
      <div class="card" style="padding:10px;overflow:hidden;">
        <div class="marquee" aria-hidden="true" id="marquee">
          <div class="deal">🔥 Discord szerver lentebb található!</div>
          <div class="deal">⚡ Prémium termékek</div>
          <div class="deal">💳 Biztonságos bankkártyás fizetés</div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== Lábléc ===== -->
  <footer id="contact">
    <div class="max footer-inner card" style="padding:24px;">
      <div>
        <div class="brand" style="margin-bottom:10px;">
          <span class="brand-badge"></span>
          <strong>d4zedstore</strong>
        </div>
        <p class="lead">Kérdésed van? Írj nekünk: <a href="mailto:hello@d4zedstore">hello@d4zedstore</a></p>
      </div>
      <div>
        <h4 style="margin-bottom:8px;">Információ</h4>
        <ul style="list-style:none;display:grid;gap:6px;color:var(--muted);">
          <li>GYIK</li>
          <li>ÁSZF & Adatvédelem</li>
        </ul>
      </div>
      <div>
        <h4 style="margin-bottom:8px;">Közösség</h4>
        <ul style="list-style:none;display:grid;gap:6px;color:var(--muted);">
          <li><a id="link-instagram" href="#" target="_blank" rel="noopener">Instagram</a></li>
          <li><a id="link-tiktok" href="#" target="_blank" rel="noopener">TikTok</a></li>
          <li><a id="link-discord" href="#" target="_blank" rel="noopener">Discord</a></li>
        </ul>
      </div>
    </div>
    <div style="text-align:center;opacity:.6;margin-top:16px;font-size:14px;">© <span id="year"></span> d4zedstore. Minden jog fenntartva.</div>
  </footer>

  <!-- ===== Gyorsnézet ===== -->
  <dialog id="quickView" style="border:none;padding:0;border-radius:18px;background:rgba(15,17,27,.96);color:var(--text);width:min(720px,92vw);">
    <div style="display:grid;grid-template-rows:auto 1fr auto;">
      <div id="qvArt" style="height:260px;position:relative;overflow:hidden;border-top-left-radius:18px;border-top-right-radius:18px;"></div>
      <div style="padding:16px;display:grid;gap:10px;">
        <div style="display:flex;align-items:flex-start;justify-content:space-between;gap:12px;">
          <div>
            <h3 id="qvName" style="font-size:22px;font-weight:800;"></h3>
            <div class="rating" id="qvRating"></div>
          </div>
          <div class="price" id="qvPrice"></div>
        </div>
        <p style="color:var(--muted);"></p>
      </div>
      <div style="display:flex;gap:10px;justify-content:flex-end;padding:12px 16px;border-top:1px solid var(--line);">
        <button class="btn" id="qvClose">Mégse</button>
        <button class="btn btn-prim" id="qvAdd">Kosárba</button>
      </div>
    </div>
  </dialog>

  <!-- ===== Kosár ===== -->
  <div class="drawer-back" id="drawerBack"></div>
  <aside class="drawer" id="cartDrawer" aria-label="Kosár" aria-modal="true" role="dialog">
    <div class="drawer-header">
      <strong>🛍️ Kosár</strong>
      <button class="btn" id="closeCartBtn">✖</button>
    </div>
    <div class="cart-items" id="cartItems"></div>
    <div class="cart-footer">
      <div class="summary"><span>Köztes összeg</span><strong id="subtotal" aria-live="polite">0 Ft</strong></div>

      <!-- SELL.APP fizetés (Stripe modál) -->
      <button class="btn btn-prim" id="checkoutBtn">Fizetés (Sell.app / Stripe)</button>

      <!-- PayPal (ide rajzol a JS gombokat) -->
      <div id="paypal-container" style="margin-top:6px;"></div>

      <small style="opacity:.65">* Stripe (Sell.app modál) vagy PayPal – digitális termékek / automata teljesítés.</small>
    </div>
  </aside>

  <!-- Láthatatlan Sell.app gombok a programozott megnyitáshoz -->
  <div id="sellapp-hidden" style="display:none;"></div>

  <script>
    /* ===== CONFIG ===== */

    /* SELL.APP bolt- és termék-azonosítók – CSERÉLD KI A SAJÁTJAIDRA! */
    const SELL_STORE_ID = "67386"; // pl. "abcd1234"
    const SELL_PRODUCT_BY_ID = {
      /* shop belső id -> sell.app product id */
      p1: "325703",
      p2: "SELL_PROD_ID_FOR_p2",
      p3: "SELL_PROD_ID_FOR_p3",
      p4: "SELL_PROD_ID_FOR_p4",
      p5: "SELL_PROD_ID_FOR_p5",
      p6: "SELL_PROD_ID_FOR_p6",
      p7: "SELL_PROD_ID_FOR_p7",
      p8: "325703",
      p9: "SELL_PROD_ID_FOR_p9",
      p10:"SELL_PROD_ID_FOR_p10",
      p11:"SELL_PROD_ID_FOR_p11",
      p12:"SELL_PROD_ID_FOR_p12"
    };

    /* SUCCESS/CANCEL: Sell.app-nál a redirect a termékbeállításoknál állítható! */
    const SUCCESS_URL = "https://d4zedstock.store/success.html";
    const CANCEL_URL  = "https://d4zedstock.store/cancel.html";

    /* Stripe publikus kulcs maradhat más funkciókhoz (nem használjuk a redirectToCheckout-ot). */
    const STRIPE_PUBLISHABLE_KEY = "pk_live_51S1yqr1Jm1mdXy5jM18rwc5y5JyUA2KhWIwJ5VcwXp9u7LlSWYey34FGBbLw36n4MF6QyaN8wx40we4ZLxRR8SB900IMi7H4hq";
    const stripe = Stripe(STRIPE_PUBLISHABLE_KEY);
  </script>

  <script>
    /* ===== Social linkek ===== */
    const SOCIAL = {
      instagram:'https://instagram.com/thsnd._',
      tiktok:'https://tiktok.com/@thsndfonok',
      discord:'https://discord.gg/8XsAAE43Gf',
    };

    /* ===== Adatok ===== */
    const PRODUCTS = [
      { id:'p1', name:'Fivem Ready', price:40, badge:'ÚJ', category:'Fivem', rating:4.8,
        img:'assets/products/fivem.jpg',
        art:'linear-gradient(135deg,#b252ff,#6ea8ff)',
        desc:'Hq quality fivem ready-k, mindegyik checkelt, és használatra kész.',
        features:['http://p1177.net/', '100% fresh fiókok!'] },
      { id:'p2', name:'Discord members', price:600, badge:'LIMITED', category:'Discord', rating:4.9,
        img:'assets/products/ds.jpg',
        art:'linear-gradient(135deg,#8a2be2,#ff3ea5)',
        desc:'Egyszerű és gyors.',
        features:['Agora Bottal','Pár óra és a szervereden','Igazi Emberek!'] },
      { id:'p3', name:'youtube follower', price:800, badge:'-20%', category:'Social', rating:4.6,
        img:'assets/products/youtube.jpg',
        art:'linear-gradient(135deg,#00e5ff,#0075ff)',
        desc:'Stabil, fix followerek.',
        features:['Nem droppol','Bevételszerzésehez tökéletes','Pár Perc és a fiókodon'] },
      { id:'p4', name:'HBO MAX', price:400, badge:'ÚJ', category:'Streaming', rating:4.7,
        img:'assets/products/max.jpg',
        art:'linear-gradient(135deg,#34d399,#0ea5e9)',
        desc:'NFA HBOMAX Account.',
        features:['Lifetime Garancia','Olcsó','Email:Pass'] },
      { id:'p5', name:'Steam Account', price:30, badge:null, category:'Fivem', rating:4.5,
        img:'assets/products/steam.jpg',
        art:'linear-gradient(135deg,#ff6b6b,#ff9f43)',
        desc:'Steam Account Fresh.',
        features:['Kész fiókok','Fivem readyhez tökéletes','Email:Pass'] },
      { id:'p6', name:'Tiktok Follower', price:550, badge:'TOP', category:'Social', rating:4.9,
        img:'assets/products/tiktok.jpg',
        art:'linear-gradient(135deg,#38bdf8,#6366f1)',
        desc:'Tiktok Followers.',
        features:['Realisztikus Profilok','Fix követők','Tiktok livehoz tökéletes választás'] },
      { id:'p7', name:'Disney', price:450, badge:'ÚJ', category:'Streaming', rating:4.7,
        img:'assets/products/disney.jpg',
        art:'linear-gradient(135deg,#00c2ff,#0066ff)',
        desc:'Disney Account.',
        features:['Lifetime Fiók','1 hónap Garancia','Legmagasabb Csomag'] },
      { id:'p8', name:'Netflix', price:699, badge:'DIGITAL', category:'Streaming', rating:4.5,
        img:'assets/products/netflix.jpg',
        art:'linear-gradient(135deg,#ff7eb3,#ff758c)',
        desc:'Netflix Account.',
        features:['4k UHD felbontás','NFA fiók','1 hónapos garancia'] },
      { id:'p9', name:'Random Decorations', price:380, badge:'HOT', category:'Discord', rating:4.6,
        img:'assets/products/dec.jpg',
        art:'linear-gradient(135deg,#5eead4,#22d3ee)',
        desc:'Random Decorations.',
        features:['Sokféle Dekoráció','Bulkba érdemesebb venni'] },
      { id:'p10', name:'Discord Account', price:80, badge:'KIT', category:'Fivem', rating:4.8,
        img:'assets/products/discord.jpg',
        art:'linear-gradient(135deg,#c084fc,#60a5fa)',
        desc:'Starter csomag FiveM szerverhez: UI skin + 3 script.',
        features:['Telepítési leírás','Konfig példák','Támogatott verziók','Ingyenes frissítés 3 hó'] },
      { id:'p11', name:'Instagram Follower', price:500, badge:null, category:'Social', rating:4.7,
        img:'assets/products/instagram.jpg',
        art:'linear-gradient(135deg,#f59e0b,#ef4444)',
        desc:'High quality és realisztikus követők.',
        features:['2 órán belül már a fiókodon','Realisztikus fiókok','refill funkció','1000 követőt kapsz ezért az árért!'] },
      { id:'p12', name:'Chuncyroll', price:300, badge:'SKIN', category:'Streaming', rating:4.4,
        img:'assets/products/chuncy.jpg',
        art:'linear-gradient(135deg,#10b981,#3b82f6)',
        desc:'Premium Chuncyroll Fiókok.',
        features:['NFA fiók','1 hónapos garancia'] },
    ];
    const CATEGORIES = ['Összes','Fivem','Discord','Social','Streaming'];

    /* ===== Segédek ===== */
    const ft = n => new Intl.NumberFormat('hu-HU',{style:'currency',currency:'HUF',maximumFractionDigits:0}).format(n);
    const el = (sel,root=document)=>root.querySelector(sel);
    const els = (sel,root=document)=>[...root.querySelectorAll(sel)];
    const getSubtotal = () => CART.reduce((s,x)=>s + x.price * x.qty, 0);

    /* NAV háttér */
    const nav = el('#nav');
    const onScroll = ()=>nav.classList.toggle('scrolled', window.scrollY>8);
    onScroll(); window.addEventListener('scroll', onScroll);

    /* Tilt effekt */
    const tilt = el('.tilt');
    if(tilt){
      tilt.addEventListener('pointermove', e=>{
        const r = tilt.getBoundingClientRect();
        const px = (e.clientX-r.left)/r.width-.5;
        const py = (e.clientY-r.top)/r.height-.5;
        tilt.style.setProperty('--rx', `${-py*6}deg`);
        tilt.style.setProperty('--ry', `${px*6}deg`);
      });
      tilt.addEventListener('pointerleave', ()=>{ tilt.style.setProperty('--rx','0deg'); tilt.style.setProperty('--ry','0deg'); });
    }

    /* Chips + Kereső */
    const chips = el('#chips'); let activeCat='Összes';
    CATEGORIES.forEach(c=>{
      const b=document.createElement('button');
      b.className='chip'+(c===activeCat?' active':''); b.textContent=c;
      b.addEventListener('click',()=>{
        activeCat=c; const s=el('#search'); if(s) s.value='';
        els('.chip',chips).forEach(x=>x.classList.remove('active')); b.classList.add('active');
        render(); const prod=el('#products'); if(prod) prod.scrollIntoView({behavior:'smooth',block:'start'});
      });
      chips.appendChild(b);
    });
    el('#search').addEventListener('input',()=>render());

    /* Kép / gradiens helper */
    function renderArt(p){
      return p.img
        ? `<img src="${p.img}" alt="${p.name}" loading="lazy">`
        : `<div class="art" style="background:${p.art}"></div>`;
    }

    /* Kártya sablon */
    const grid = el('#grid');
    function starSVG(f){ return `<svg width="14" height="14" viewBox="0 0 24 24" fill="${f?'currentColor':'none'}" xmlns="http://www.w3.org/2000/svg" style="opacity:${f?1:.35}"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" stroke="currentColor" stroke-width="2"/></svg>`; }
    function card(p){
      const badge = p.badge ? `<span class="badge">${p.badge}</span>` : '';
      const rating = `<span class="rating">${Array.from({length:5}).map((_,i)=>starSVG(i<Math.round(p.rating))).join('')} ${p.rating.toFixed(1)}</span>`;
      return `<article class="p-card card reveal" data-open-product="${p.id}" style="cursor:pointer">
        <div class="thumb">${renderArt(p)}${badge}</div>
        <div class="p-body">
          <div class="p-top">
            <div><h3 style="font-weight:800;font-size:16px;">${p.name}</h3>${rating}</div>
            <div class="price">${ft(p.price)}</div>
          </div>
          <div class="actions">
            <button class="btn btn-prim" data-add="${p.id}">➕ Kosárba</button>
            <button class="btn btn-like" data-qv="${p.id}">👁️ Gyorsnézet</button>
          </div>
        </div>
      </article>`;
    }

    function render(){
      const q = el('#search').value.trim().toLowerCase();
      const shown = PRODUCTS.filter(p => (activeCat==='Összes'||p.category===activeCat) && (!q || p.name.toLowerCase().includes(q)));
      el('#activeLabel').textContent = activeCat;
      grid.innerHTML = shown.map(card).join('');
      reveal.observeAll();
      els('[data-add]').forEach(b=>b.addEventListener('click', e=>{ e.stopPropagation(); addToCart(b.dataset.add); }));
      els('[data-qv]').forEach(b=>b.addEventListener('click', e=>{ e.stopPropagation(); openQuickView(b.dataset.qv); }));
      els('[data-open-product]').forEach(cardEl=>cardEl.addEventListener('click',()=>{
        const id = cardEl.getAttribute('data-open-product');
        openProduct(id); location.hash = `#p-${id}`;
        el('#productDetail').scrollIntoView({behavior:'smooth',block:'start'});
      }));
    }

    /* Reveal */
    const reveal = {
      io:new IntersectionObserver(entries=>entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('in'); reveal.io.unobserve(e.target);} }),{threshold:.15}),
      observeAll(){ els('.reveal').forEach(n=>this.io.observe(n)); }
    };

    /* Product detail */
    let PD_CURRENT=null;
    const pdSec=el('#productDetail'), pdArt=el('#pdArt'), pdName=el('#pdName'), pdRating=el('#pdRating'), pdPrice=el('#pdPrice'), pdDesc=el('#pdDesc'), pdFeat=el('#pdFeat');

    function openProduct(id){
      const p = PRODUCTS.find(x=>x.id===id); if(!p) return;
      PD_CURRENT=p;
      pdArt.innerHTML = renderArt(p);
      pdName.textContent=p.name;
      pdPrice.textContent=ft(p.price);
      pdRating.innerHTML = `${Array.from({length:5}).map((_,i)=>starSVG(i<Math.round(p.rating))).join('')} ${p.rating.toFixed(1)}`;
      pdDesc.textContent=p.desc||'';
      pdFeat.innerHTML=(p.features||[]).map(f=>`<li>${f}</li>`).join('');
      pdSec.style.display='block';
      bindDetailButtons();
    }

    function bindDetailButtons(){
      const addBtn=el('#pdAdd'), buyBtn=el('#pdBuy'), backBtn=el('#pdBack');
      if(addBtn) addBtn.onclick = e=>{ e.preventDefault(); if(PD_CURRENT) addToCart(PD_CURRENT.id); };
      if(buyBtn) buyBtn.onclick = e=>{ e.preventDefault(); if(PD_CURRENT){ addToCart(PD_CURRENT.id); openCart(); } };
      if(backBtn) backBtn.onclick = e=>{ e.preventDefault(); pdSec.style.display='none'; history.pushState('',document.title,window.location.pathname+window.location.search); };
    }

    pdSec.addEventListener('click', e=>{
      const t=e.target.closest('button'); if(!t) return;
      if(t.id==='pdAdd' && PD_CURRENT){ e.preventDefault(); addToCart(PD_CURRENT.id); }
      if(t.id==='pdBuy' && PD_CURRENT){ e.preventDefault(); addToCart(PD_CURRENT.id); openCart(); }
      if(t.id==='pdBack'){ e.preventDefault(); pdSec.style.display='none'; history.pushState('',document.title,window.location.pathname+window.location.search); }
    });

    function handleHash(){
      const m=location.hash.match(/^#p-(.+)$/);
      if(m){ openProduct(m[1]); } else { pdSec.style.display='none'; PD_CURRENT=null; }
    }
    window.addEventListener('hashchange', handleHash);

    /* Quick View */
    const qv=el('#quickView'), qvName=el('#qvName'), qvPrice=el('#qvPrice'), qvRating=el('#qvRating'), qvArt=el('#qvArt'), qvAdd=el('#qvAdd'), qvClose=el('#qvClose');
    let qvCurrent=null;
    function openQuickView(id){
      const p=PRODUCTS.find(x=>x.id===id); if(!p) return;
      qvCurrent=p; qvName.textContent=p.name; qvPrice.textContent=ft(p.price);
      qvRating.innerHTML=`${Array.from({length:5}).map((_,i)=>starSVG(i<Math.round(p.rating))).join('')} ${p.rating.toFixed(1)}`;
      qvArt.innerHTML = renderArt(p);
      if(!qv.open) qv.showModal();
    }
    qvAdd.addEventListener('click', ()=>{ if(qvCurrent){ addToCart(qvCurrent.id); qv.close(); } });
    qvClose.addEventListener('click', ()=>qv.close());
    document.addEventListener('keydown', e=>{ if(e.key==='Escape'){ if(qv.open) qv.close(); if(drawer.classList.contains('open')) closeCart(); } });

    /* Kosár */
    const drawerBack=el('#drawerBack'), drawer=el('#cartDrawer'), openCartBtn=el('#openCartBtn'), closeCartBtn=el('#closeCartBtn'), cartItems=el('#cartItems'), subtotalEl=el('#subtotal'), checkoutBtn=el('#checkoutBtn');
    openCartBtn.addEventListener('click', openCart); closeCartBtn.addEventListener('click', closeCart); drawerBack.addEventListener('click', closeCart);

    let CART=JSON.parse(localStorage.getItem('d4zed_cart')||'[]');
    function saveCart(){ localStorage.setItem('d4zed_cart', JSON.stringify(CART)); }
    function openCart(){ drawer.classList.add('open'); drawerBack.classList.add('open'); renderCart(); renderPayPalButtons(); }
    function closeCart(){ drawer.classList.remove('open'); drawerBack.classList.remove('open'); }

    function addToCart(id){
      const p=PRODUCTS.find(x=>x.id===id); if(!p) return;
      const ex=CART.find(x=>x.id===id);
      if(ex) ex.qty+=1; else CART.push({id:p.id,name:p.name,price:p.price,art:p.art,img:p.img,qty:1});
      saveCart(); openCart();
    }
    function changeQty(id,d){ const it=CART.find(x=>x.id===id); if(!it) return; it.qty=Math.max(1,it.qty+d); saveCart(); renderCart(); renderPayPalButtons(); }
    function removeItem(id){ CART=CART.filter(x=>x.id!==id); saveCart(); renderCart(); renderPayPalButtons(); }

    function renderCart(){
      if(!CART.length){ cartItems.innerHTML='<div style="opacity:.7;text-align:center;padding:20px;">A kosár üres.</div>'; subtotalEl.textContent=ft(0); return; }
      cartItems.innerHTML = CART.map(it=>`
        <div class="cart-row">
          <div class="thumb">
            ${it.img ? `<img src="${it.img}" alt="${it.name}">` : `<div class="art" style="background:${it.art}"></div>`}
          </div>
          <div>
            <div style="font-weight:700">${it.name}</div>
            <div style="opacity:.7;font-size:13px;">Egységár: ${ft(it.price)}</div>
            <div class="qty" style="margin-top:6px;">
              <button aria-label="Mennyiség csökkentése" data-dec="${it.id}">−</button>
              <strong>${it.qty}</strong>
              <button aria-label="Mennyiség növelése" data-inc="${it.id}">+</button>
              <button class="btn" style="margin-left:8px;" aria-label="Termék törlése" data-del="${it.id}">🗑️</button>
            </div>
          </div>
          <div style="font-weight:800;">${ft(it.price*it.qty)}</div>
        </div>`).join('');
      cartItems.querySelectorAll('[data-dec]').forEach(b=>b.addEventListener('click',()=>changeQty(b.dataset.dec,-1)));
      cartItems.querySelectorAll('[data-inc]').forEach(b=>b.addEventListener('click',()=>changeQty(b.dataset.inc,1)));
      cartItems.querySelectorAll('[data-del]').forEach(b=>b.addEventListener('click',()=>removeItem(b.dataset.del)));
      const subtotal=getSubtotal(); subtotalEl.textContent=ft(subtotal);
    }

    /* ===== SELL.APP CHECKOUT (Stripe modál a saját oldalon) ===== */

    // Rejtett gomb előkészítése az adott termékhez
    function ensureHiddenButtonFor(productId){
      const sellProduct = SELL_PRODUCT_BY_ID[productId];
      if(!sellProduct) return null;
      let btn = document.getElementById(`sellbtn-${productId}`);
      if(!btn){
        btn = document.createElement('button');
        btn.id = `sellbtn-${productId}`;
        btn.setAttribute('data-sell-store', SELL_STORE_ID);
        btn.setAttribute('data-sell-product', sellProduct);
        btn.setAttribute('data-sell-darkmode', 'true');
        btn.setAttribute('data-sell-theme', '#0bbf4c');
        document.getElementById('sellapp-hidden').appendChild(btn);
      }
      return btn;
    }

    // Kosár → Sell.app modál
    checkoutBtn.addEventListener('click', () => {
      if (!CART.length) { alert('A kosár üres.'); return; }

      // Hány különböző termék?
      const unique = [...new Set(CART.map(x=>x.id))];
      if (unique.length > 1) {
        alert('A Sell.app beágyazott checkout egy terméket tud egyszerre kezelni.\nKérlek fizess termékenként külön, vagy állíts be termékcsoportot a Sell.app-ban.');
        return;
      }

      const id = unique[0];
      const qty = CART.find(x=>x.id===id)?.qty ?? 1;
      const hiddenBtn = ensureHiddenButtonFor(id);
      if(!hiddenBtn){
        alert('Ehhez a termékhez nincs megadva Sell.app Product ID. Állítsd be a SELL_PRODUCT_BY_ID táblában.');
        return;
      }

      // mennyiség átadása a data attribútusban
      hiddenBtn.setAttribute('data-sell-quantity', String(qty));

      // Sell.app modál megnyitása a gomb "kattintásával"
      hiddenBtn.click();
    });

    /* ===== PAYPAL: Gombok kirajzolása és fizetés ===== */
    function renderPayPalButtons(){
      const cont = el('#paypal-container');
      if(!cont) return;
      if (typeof window.paypal === 'undefined') { setTimeout(renderPayPalButtons, 300); return; }
      cont.innerHTML = "";
      const subtotal = getSubtotal();
      if (subtotal <= 0) { cont.innerHTML = ""; return; }

      window.paypal.Buttons({
        style: { layout: 'vertical', shape: 'rect', label: 'paypal' },
        createOrder: (data, actions) => {
          const amountValue = String(subtotal);
          return actions.order.create({
            purchase_units: [{
              amount: { currency_code: PAYPAL_CURRENCY, value: amountValue },
              description: 'd4zedstore – kosár'
            }],
            application_context: { shipping_preference: 'NO_SHIPPING' }
          });
        },
        onApprove: (data, actions) => {
          return actions.order.capture().then(details => {
            CART = []; saveCart();
            window.location.href = SUCCESS_URL + `?pp_order=${encodeURIComponent(data.orderID)}`;
          });
        },
        onError: (err) => {
          console.error(err);
          alert('Hiba történt a PayPal fizetés közben.');
        }
      }).render('#paypal-container');
    }

    /* Init */
    render(); handleHash();
    el('#year').textContent=new Date().getFullYear();
    const li=el('#link-instagram'); if(li) li.href=SOCIAL.instagram;
    const lt=el('#link-tiktok'); if(lt) lt.href=SOCIAL.tiktok;
    const ld=el('#link-discord'); if(ld) ld.href=SOCIAL.discord;
    const mq=el('#marquee'); mq.innerHTML+=mq.innerHTML;
    setTimeout(()=>reveal.observeAll(),50);
  </script>

  <!-- Sell.app embed script (kötelező a modálhoz) -->
  <script type="module" src="https://cdn.sell.app/embed/script.js"></script>
</body>
</html>
